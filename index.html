<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="description" content="Easy Fragrance - Your personal fragrance companion. Discover, organize, and track your favorite fragrances with smart recommendations and mood-based suggestions.">
  <meta name="keywords" content="fragrance, perfume, cologne, scent, fragrance library, fragrance recommendations">
  <meta name="author" content="Easy Fragrance">
  <meta name="theme-color" content="#8e44ad">
  <title>Easy Fragrance v1.0 - Your Personal Fragrance Companion</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Splash Screen -->
  <div id="splashScreen" class="splash-screen">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="splash-content">
      <div class="splash-logo">
        <span class="flower-icon">🌸</span>
        <span class="rose-icon">🌹</span>
      </div>
      <h1>Easy Fragrance</h1>
      <p>Find your perfect scent</p>
      <div class="loading-dots" id="loadingDots">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <button class="begin-button" id="beginButton" onclick="beginApp()" style="display: none;">
        <span class="begin-icon">🚀</span>
        <span class="begin-text">Begin Your Journey</span>
      </button>
    </div>
  </div>

  <!-- Gender Selection Modal -->
  <div id="genderModal" class="gender-modal">
    <div class="gender-modal-content">
      <div class="gender-modal-header">
        <h2>Choose Your Preference</h2>
        <p>We'll personalize your fragrance recommendations</p>
      </div>
      <div class="gender-options">
        <div class="gender-option" data-gender="male">
          <div class="gender-icon">👨</div>
          <h3>Male</h3>
          <p>Masculine fragrances & blue theme</p>
        </div>
        <div class="gender-option" data-gender="female">
          <div class="gender-icon">👩</div>
          <h3>Female</h3>
          <p>Feminine fragrances & pink theme</p>
        </div>
        <div class="gender-option" data-gender="neutral">
          <div class="gender-icon">⚪</div>
          <h3>Prefer not to say</h3>
          <p>Universal fragrances & balanced theme</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Fragrance Selection Modal -->
  <div id="fragranceSelectionModal" class="fragrance-selection-modal">
    <div class="fragrance-selection-content">
      <div class="fragrance-selection-header">
        <h3 id="selectionModalTitle">Select a Fragrance</h3>
        <p id="selectionModalSubtitle">Choose a fragrance for this day</p>
      </div>
      <div class="fragrance-selection-list" id="fragranceSelectionList">
        <!-- Fragrance options will be populated here -->
      </div>
      <div class="fragrance-selection-actions">
        <button class="cancel-btn" onclick="hideFragranceSelectionModal()">Cancel</button>
        <button class="assign-btn" id="assignFragranceBtn" onclick="assignFragranceToDay()" disabled>Assign Fragrance</button>
      </div>
    </div>
  </div>

  <!-- Questionnaire Modal -->
  <div id="questionnaireModal" class="questionnaire-modal">
    <div class="questionnaire-content">
      <div class="questionnaire-header">
        <div class="progress-bar">
          <div class="progress-fill" id="questionProgress"></div>
        </div>
        <h3 id="questionTitle">Let's Find Your Perfect Fragrance</h3>
        <p id="questionSubtitle">Answer a few questions to get personalized recommendations</p>
      </div>
      
      <div class="question-container" id="questionContainer">
        <!-- Questions will be dynamically loaded here -->
      </div>
      
      <div class="questionnaire-actions">
        <button class="back-btn" id="backBtn" onclick="previousQuestion()" style="display: none;">Back</button>
        <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Next</button>
        <button class="finish-btn" id="finishBtn" onclick="finishQuestionnaire()" style="display: none;">Get Recommendations</button>
      </div>
    </div>
  </div>

  <!-- iOS Device Mode -->
  <div id="iosDeviceMode" class="ios-device-mode">
    <div class="ios-device-frame">
      <div class="ios-status-bar">
        <div class="ios-status-left">
          <span>9:41</span>
        </div>
        <div class="ios-status-right">
          <span>📶</span>
          <span>📶</span>
          <span>🔋</span>
        </div>
      </div>
      <div class="ios-content">
        <!-- All existing content will be cloned here -->
      </div>
      <div class="ios-home-indicator"></div>
    </div>
  </div>

  <!-- Device Mode Toggle -->
  <button class="device-mode-toggle" id="deviceModeToggle" onclick="toggleDeviceMode()">
    📱
  </button>

  <!-- Modern Header -->
  <header class="modern-header">
    <div class="header-container">
      <div class="header-content">
        <div class="header-logo">
          <span class="logo-icon">
            <span class="flower-icon-small">🌸</span>
            <span class="rose-icon-small">🌹</span>
          </span>
          <span class="logo-text">Easy Fragrance</span>
        </div>
        <div class="header-actions">
          <button class="theme-toggle" id="themeToggle">
            <span class="theme-icon">🌙</span>
          </button>
          <button class="settings-btn" id="settingsBtn" onclick="toggleSettingsModal()" title="Settings">
            <span class="settings-icon">⚙️</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-links">
        <a href="#home" class="nav-link active" data-page="home">Home</a>
        <a href="#library" class="nav-link" data-page="library">Library</a>
        <a href="#wishlist" class="nav-link" data-page="wishlist">Wishlist</a>
      </div>
      <div class="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>

  <!-- Page Container -->
  <div class="page-container">
    <!-- Home Page -->
    <div id="homePage" class="page active">
      <div class="container">
        <!-- Main Alert Widget -->
        <div class="main-alert-widget" id="mainAlertWidget">
          <div class="alert-content">
            <div class="alert-icon">🎯</div>
            <div class="alert-info">
              <h3>Discover Your Perfect Fragrance</h3>
              <p>Get personalized recommendations based on your preferences</p>
            </div>
            <div class="alert-action">
              <button class="alert-button" onclick="startQuestionnaire()">Start Quiz</button>
            </div>
          </div>
        </div>

        <!-- Wishlist Alert Section -->
        <div class="wishlist-alert-section" id="wishlistAlertSection">
          <div class="wishlist-alert-content">
            <div class="wishlist-alert-icon">💰</div>
            <div class="wishlist-alert-info">
              <h3>Track Your Wishlist</h3>
              <p>Monitor prices and get notified about the best deals for your desired fragrances</p>
            </div>
            <div class="wishlist-alert-action">
              <button class="wishlist-alert-button" onclick="navigateToPage('wishlist')">View Wishlist</button>
              <button class="wishlist-alert-button" onclick="dismissWishlistAlert()">Maybe Later</button>
            </div>
            <button class="wishlist-alert-dismiss" onclick="dismissWishlistAlert()">×</button>
          </div>
        </div>

        <!-- Quick Access Widgets -->
        <div class="widgets-grid">
          <div class="widget-card" onclick="navigateToPage('library')">
            <div class="widget-icon">📚</div>
            <div class="widget-content">
              <h4>My Library</h4>
              <p>Manage your collection</p>
              <span class="widget-count" id="libraryCount">0 fragrances</span>
            </div>
          </div>

          <div class="widget-card" onclick="navigateToPage('library')">
            <div class="widget-icon">📅</div>
            <div class="widget-content">
              <h4>Weekly Schedule</h4>
              <p>Plan your week</p>
              <span class="widget-count" id="scheduleCount">0 planned</span>
            </div>
          </div>

          <div class="widget-card" onclick="navigateToPage('wishlist')">
            <div class="widget-icon">💰</div>
            <div class="widget-content">
              <h4>Wishlist</h4>
              <p>Track deals & prices</p>
              <span class="widget-count" id="wishlistCount">0 items</span>
            </div>
          </div>
        </div>

        <!-- Recently Added Section -->
        <div class="recently-added-section">
          <div class="section-header">
            <h3>Recently Added</h3>
            <button class="view-all-btn" onclick="navigateToPage('library')">View All</button>
          </div>
          <div class="recently-added-grid" id="recentlyAddedGrid">
            <!-- Recently added fragrances will be displayed here -->
          </div>
        </div>

        <!-- Hidden Recommendation Section (for after questionnaire) -->
        <div class="recommendation-section hidden" id="recommendationSection">
          <div class="input-group">
            <textarea id="scenario" placeholder="Describe your day, mood, or event... (e.g., 'I have a romantic date tonight' or 'It's a hot summer day at the beach')"></textarea>
            <button onclick="getFragranceWithScroll()" class="main-button">
              <span class="button-icon">🔍</span>
              <span class="button-text">Find My Fragrance</span>
            </button>
          </div>
          <div id="result"></div>
        </div>
      </div>
    </div>

    <!-- Library Page -->
    <div id="libraryPage" class="page">
      <div class="container">
        <div class="page-header">
          <h1>My Fragrance Library</h1>
          <p>Manage your personal fragrance collection</p>
        </div>
        
        <div class="library-section">
          <div id="libraryMoodSuggest" class="todays-fragrance" style="margin-bottom: 1.5rem;">
            <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
              <input type="text" id="moodInput" placeholder="Describe your mood, event, or vibe..." maxlength="100" style="flex:1; padding: 0.8rem 1.2rem; border-radius: 12px; border: 1px solid var(--border-color); background: var(--card-bg); color: var(--text-primary); min-width: 180px;">
              <button onclick="suggestFromLibrary()" class="main-button" style="min-width: 120px;">Suggest from My Library</button>
            </div>
            <div id="moodSuggestionResult" style="margin-top: 1rem;"></div>
          </div>
          <div id="libraryRecommendationCard" class="todays-fragrance" style="margin-bottom: 2rem; display: none;">
            <!-- Recommendation will be injected here -->
          </div>
          <div class="add-fragrance">
            <input type="text" id="fragranceInput" placeholder="Enter fragrance name..." maxlength="100">
            <button onclick="addFragrance()" class="add-button">Add</button>
          </div>
          
          <div id="fragranceList" class="fragrance-list">
            <!-- Fragrances will be displayed here -->
          </div>
        </div>

        <!-- Weekly Planner Section -->
        <div class="planner-section">
          <div class="planner-header">
            <h2>Weekly Fragrance Planner</h2>
            <p>Plan your fragrances for the week ahead</p>
          </div>
          
          <div class="today-fragrance" id="todayFragrance">
            <h3>Today's Fragrance</h3>
            <div class="today-content">
              <span class="today-icon">🌸</span>
              <div class="today-info">
                <span class="today-text" id="todayText">No fragrance assigned for today</span>
                <span class="today-date" id="todayDate"></span>
              </div>
            </div>
          </div>
          
          <div class="weekly-calendar" id="weeklyCalendar">
            <!-- Calendar days will be generated here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Wishlist Page -->
    <div id="wishlistPage" class="page">
      <div class="container">
        <div class="page-header">
          <h1>My Wishlist</h1>
          <p>Track prices and find the best deals for your desired fragrances</p>
        </div>
        
        <div class="wishlist-section">
          <div class="add-wishlist-item">
            <select id="wishlistSelect" class="wishlist-select">
              <option value="">Select a fragrance to add...</option>
            </select>
            <button onclick="addToWishlist()" class="add-button">Add to Wishlist</button>
          </div>
          
          <div id="wishlistItems" class="wishlist-items">
            <!-- Wishlist items will be displayed here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="settings-modal">
    <div class="settings-content">
      <div class="settings-header">
        <div class="settings-icon-large">⚙️</div>
        <h2>Settings</h2>
        <button class="settings-close" onclick="toggleSettingsModal()">×</button>
      </div>
      
      <div class="settings-sections">
        <!-- Device Mode Section -->
        <div class="settings-section">
          <h3>📱 Device Mode</h3>
          <p>Experience the app in iOS device mode</p>
          <button class="settings-button device-mode-btn" onclick="toggleDeviceModeFromSettings()">
            <span class="button-icon">📱</span>
            <span class="button-text">Toggle iOS Device Mode</span>
          </button>
        </div>
        
        <!-- Color Palette Section -->
        <div class="settings-section">
          <h3>🎨 Color Palette</h3>
          <p>Customize the app's color scheme</p>
          <div class="color-palette-grid">
            <div class="color-option" data-theme="default" onclick="applyColorTheme('default')">
              <div class="color-preview default-theme"></div>
              <span>Default</span>
            </div>
            <div class="color-option" data-theme="ocean" onclick="applyColorTheme('ocean')">
              <div class="color-preview ocean-theme"></div>
              <span>Ocean</span>
            </div>
            <div class="color-option" data-theme="sunset" onclick="applyColorTheme('sunset')">
              <div class="color-preview sunset-theme"></div>
              <span>Sunset</span>
            </div>
            <div class="color-option" data-theme="forest" onclick="applyColorTheme('forest')">
              <div class="color-preview forest-theme"></div>
              <span>Forest</span>
            </div>
            <div class="color-option" data-theme="lavender" onclick="applyColorTheme('lavender')">
              <div class="color-preview lavender-theme"></div>
              <span>Lavender</span>
            </div>
            <div class="color-option" data-theme="midnight" onclick="applyColorTheme('midnight')">
              <div class="color-preview midnight-theme"></div>
              <span>Midnight</span>
            </div>
          </div>
        </div>
        
        <!-- Reset Section -->
        <div class="settings-section">
          <h3>Data Management</h3>
          <p>Manage your app data and preferences</p>
          <div class="reset-options">
            <button class="settings-button reset-preferences-btn" onclick="resetPreferences()">
              <span class="button-icon">🔄</span>
              <span class="button-text">Reset Preferences</span>
            </button>
            <button class="settings-button reset-btn" onclick="showResetConfirmation()">
              <span class="button-icon">🗑️</span>
              <span class="button-text">Reset All Data</span>
            </button>
          </div>
        </div>
        
        <!-- About Section -->
        <div class="settings-section">
          <h3>ℹ️ About</h3>
          <p>Easy Fragrance v1.0</p>
          <p class="about-text">Your personal fragrance companion</p>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
